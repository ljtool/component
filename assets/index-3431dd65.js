import{i as Ce,n as ge,e as x,c as $,g as we,a as Y,w as te,p as Ie,b as Oe,d as be,o as Se,f as pe,s as xe}from"./base-88edd0c1.js";import{n as I,t as b,u as E,T as V,o as Te,g as Pe,p as oe,a as ne,m as S,H as _e,I as ae,b as Be,L as ze,B as F}from"./index-5ec53294.js";import{C as j,y as m,D as se,E as Le,u as p,G as H,e as u,T as le,j as D,v as ce,H as Ae,q as Ee,I as ie,J as De,L as Me,M as Ne,F as re,N as M,O as Re,s as $e,A as Ye,r as je,o as z,c as R,w as L,a as He,b as Ue,d as Ve,B as T,g as K,t as Fe}from"./vue-libs-9169e31b.js";import{S as Ke}from"./index-b40c86e7.js";function Xe(e,{args:t=[],done:o,canceled:l,error:n}){if(e){const a=e.apply(null,t);Ce(a)?a.then(s=>{s?o():l&&l()}).catch(n||ge):a?o():l&&l()}else o()}const Ge=Symbol();function ue(e){const t=j();t&&x(t.proxy,e)}let Ze=2e3;const qe=()=>++Ze,Je={show:Boolean,zIndex:I,overlay:b,duration:I,teleport:[String,Object],lockScroll:b,lazyRender:b,beforeClose:Function,overlayStyle:Object,overlayClass:E,transitionAppear:Boolean,closeOnClickOverlay:b};function We(e,t){return e>t?"horizontal":t>e?"vertical":""}function Qe(){const e=m(0),t=m(0),o=m(0),l=m(0),n=m(0),a=m(0),s=m(""),c=m(!0),h=()=>s.value==="vertical",y=()=>s.value==="horizontal",f=()=>{o.value=0,l.value=0,n.value=0,a.value=0,s.value="",c.value=!0};return{move:v=>{const k=v.touches[0];o.value=(k.clientX<0?0:k.clientX)-e.value,l.value=k.clientY-t.value,n.value=Math.abs(o.value),a.value=Math.abs(l.value);const C=10;(!s.value||n.value<C&&a.value<C)&&(s.value=We(n.value,a.value)),c.value&&(n.value>V||a.value>V)&&(c.value=!1)},start:v=>{f(),e.value=v.touches[0].clientX,t.value=v.touches[0].clientY},reset:f,startX:e,startY:t,deltaX:o,deltaY:l,offsetX:n,offsetY:a,direction:s,isVertical:h,isHorizontal:y,isTap:c}}let P=0;const X="van-overflow-hidden";function et(e,t){const o=Qe(),l="01",n="10",a=f=>{o.move(f);const i=o.deltaY.value>0?n:l,d=Pe(f.target,e.value),{scrollHeight:v,offsetHeight:k,scrollTop:C}=d;let g="11";C===0?g=k>=v?"00":"01":C+k>=v&&(g="10"),g!=="11"&&o.isVertical()&&!(parseInt(g,2)&parseInt(i,2))&&oe(f,!0)},s=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",a,{passive:!1}),P||document.body.classList.add(X),P++},c=()=>{P&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",a),P--,P||document.body.classList.remove(X))},h=()=>t()&&s(),y=()=>t()&&c();Te(h),se(y),Le(y),p(t,f=>{f?s():c()})}function de(e){const t=m(!1);return p(e,o=>{o&&(t.value=o)},{immediate:!0}),o=>()=>t.value?o():null}const G=()=>{var e;const{scopeId:t}=((e=j())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[tt,ot]=$("overlay"),nt={show:Boolean,zIndex:I,duration:I,className:E,lockScroll:b,lazyRender:b,customStyle:Object};var at=H({name:tt,props:nt,setup(e,{slots:t}){const o=m(),l=de(()=>e.show||!e.lazyRender),n=s=>{e.lockScroll&&oe(s,!0)},a=l(()=>{var s;const c=x(we(e.zIndex),e.customStyle);return Y(e.duration)&&(c.animationDuration=`${e.duration}s`),D(u("div",{ref:o,style:c,class:[ot(),e.className]},[(s=t.default)==null?void 0:s.call(t)]),[[ce,e.show]])});return ne("touchmove",n,{target:o}),()=>u(le,{name:"van-fade",appear:!0},{default:a})}});const st=te(at),lt=x({},Je,{round:Boolean,position:S("center"),closeIcon:S("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:S("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ct,Z]=$("popup");var it=H({name:ct,inheritAttrs:!1,props:lt,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:o,slots:l}){let n,a;const s=m(),c=m(),h=de(()=>e.show||!e.lazyRender),y=Ae(()=>{const r={zIndex:s.value};if(Y(e.duration)){const w=e.position==="center"?"animationDuration":"transitionDuration";r[w]=`${e.duration}s`}return r}),f=()=>{n||(n=!0,s.value=e.zIndex!==void 0?+e.zIndex:qe(),t("open"))},i=()=>{n&&Xe(e.beforeClose,{done(){n=!1,t("close"),t("update:show",!1)}})},d=r=>{t("clickOverlay",r),e.closeOnClickOverlay&&i()},v=()=>{if(e.overlay)return u(st,M({show:e.show,class:e.overlayClass,zIndex:s.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},G(),{onClick:d}),{default:l["overlay-content"]})},k=r=>{t("clickCloseIcon",r),i()},C=()=>{if(e.closeable)return u(ae,{role:"button",tabindex:0,name:e.closeIcon,class:[Z("close-icon",e.closeIconPosition),_e],classPrefix:e.iconPrefix,onClick:k},null)};let g;const ve=()=>{g&&clearTimeout(g),g=setTimeout(()=>{t("opened")})},me=()=>t("closed"),ye=r=>t("keydown",r),he=h(()=>{var r;const{round:w,position:B,safeAreaInsetTop:N,safeAreaInsetBottom:ke}=e;return D(u("div",M({ref:c,style:y.value,role:"dialog",tabindex:0,class:[Z({round:w,[B]:B}),{"van-safe-area-top":N,"van-safe-area-bottom":ke}],onKeydown:ye},o,G()),[(r=l.default)==null?void 0:r.call(l),C()]),[[ce,e.show]])}),U=()=>{const{position:r,transition:w,transitionAppear:B}=e,N=r==="center"?"van-fade":`van-popup-slide-${r}`;return u(le,{name:w||N,appear:B,onAfterEnter:ve,onAfterLeave:me},{default:he})};return p(()=>e.show,r=>{r&&!n&&(f(),o.tabindex===0&&Ee(()=>{var w;(w=c.value)==null||w.focus()})),!r&&n&&(n=!1,t("close"))}),ue({popupRef:c}),et(c,()=>e.show&&e.lockScroll),ne("popstate",()=>{e.closeOnPopstate&&(i(),a=!1)}),ie(()=>{e.show&&f()}),De(()=>{a&&(t("update:show",!0),a=!1)}),se(()=>{e.show&&e.teleport&&(i(),a=!0)}),Me(Ge,()=>e.show),()=>e.teleport?u(Ne,{to:e.teleport},{default:()=>[v(),U()]}):u(re,null,[v(),U()])}});const rt=te(it);let _=0;function ut(e){e?(_||document.body.classList.add("van-toast--unclickable"),_++):_&&(_--,_||document.body.classList.remove("van-toast--unclickable"))}const[dt,O]=$("toast"),ft=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],vt={icon:String,show:Boolean,type:S("text"),overlay:Boolean,message:I,iconSize:I,duration:Be(2e3),position:S("middle"),teleport:[String,Object],wordBreak:String,className:E,iconPrefix:String,transition:S("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:E,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:I};var mt=H({name:dt,props:vt,emits:["update:show"],setup(e,{emit:t,slots:o}){let l,n=!1;const a=()=>{const i=e.show&&e.forbidClick;n!==i&&(n=i,ut(n))},s=i=>t("update:show",i),c=()=>{e.closeOnClick&&s(!1)},h=()=>clearTimeout(l),y=()=>{const{icon:i,type:d,iconSize:v,iconPrefix:k,loadingType:C}=e;if(i||d==="success"||d==="fail")return u(ae,{name:i||d,size:v,class:O("icon"),classPrefix:k},null);if(d==="loading")return u(ze,{class:O("loading"),size:v,type:C},null)},f=()=>{const{type:i,message:d}=e;if(o.message)return u("div",{class:O("text")},[o.message()]);if(Y(d)&&d!=="")return i==="html"?u("div",{key:0,class:O("text"),innerHTML:String(d)},null):u("div",{class:O("text")},[d])};return p(()=>[e.show,e.forbidClick],a),p(()=>[e.show,e.type,e.message,e.duration],()=>{h(),e.show&&e.duration>0&&(l=setTimeout(()=>{s(!1)},e.duration))}),ie(a),Re(a),()=>u(rt,M({class:[O([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:h,"onUpdate:show":s},Ie(e,ft)),{default:()=>[y(),f()]})}});function yt(){const e=Ye({show:!1}),t=n=>{e.show=n},o=n=>{x(e,n,{transitionAppear:!0}),t(!0)},l=()=>t(!1);return ue({open:o,close:l,toggle:t}),{open:o,close:l,state:e,toggle:t}}function ht(e){const t=$e(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}const kt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let A=[],Ct=!1,q=x({},kt);const gt=new Map;function wt(e){return be(e)?e:{message:e}}function It(){const{instance:e,unmount:t}=ht({setup(){const o=m(""),{open:l,state:n,close:a,toggle:s}=yt(),c=()=>{},h=()=>u(mt,M(n,{onClosed:c,"onUpdate:show":s}),null);return p(o,y=>{n.message=y}),j().render=h,{open:l,close:a,message:o}}});return e}function Ot(){if(!A.length||Ct){const e=It();A.push(e)}return A[A.length-1]}function bt(e={}){if(!Oe)return{};const t=Ot(),o=wt(e);return t.open(x({},q,gt.get(o.type||q.type),o)),t}const J="ontouchstart"in window||navigator.maxTouchPoints>0?"touchstart":"click",fe=function(e,t,o=!1){var a,s;const l=+(((a=e.dataset)==null?void 0:a.delay)||500),n=+(((s=e.dataset)==null?void 0:s.count)||2);o?(pe(e,J,e.onMutilClick),e.d=null,e.onMutilClick=null):(e.d={count:n},e.onMutilClick=c=>{e.d.timer&&clearTimeout(e.d.timer),e.d.timer=setTimeout(()=>{e.d.count=n},l),e.d.count--,e.d.count||(e.d.count=n,typeof t.value=="function"&&t.value(c))},Se(e,J,e.onMutilClick))},W=function(e,t){fe(e,t)},Q=function(e,t){fe(e,t,!0)},ee={mounted:W,beforeUnmount:Q,bind:W,unbind:Q},Pt={__name:"index",setup(e){xe(localStorage.getItem("logLevel"));const t=o=>{bt(o)};return(o,l)=>{const n=je("demo-block");return z(),R(n,{title:"mutilClick"},{default:L(()=>[u(T(Ke),{wrap:"",size:10},{default:L(()=>[(z(),He(re,null,Ue([1,2,3,4,5],(a,s)=>Ve("div",{class:"",key:s},[D((z(),R(T(F),{"data-count":a},{default:L(()=>[K(Fe(a)+"连击 ",1)]),_:2},1032,["data-count"])),[[T(ee),()=>t(a+"连击")]])])),64))]),_:1}),D((z(),R(T(F),null,{default:L(()=>[K(" default:2连击 ")]),_:1})),[[T(ee),()=>t("2连击")]])]),_:1})}}};export{Pt as default};
